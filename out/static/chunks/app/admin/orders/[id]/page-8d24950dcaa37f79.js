(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2643],{40589:function(e,t,r){Promise.resolve().then(r.bind(r,58292))},58292:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var n=r(57437),a=r(99376),s=r(2265),i=r(62869),l=r(95186),o=r(26815),d=r(53647),u=r(66070),c=r(35153);let f=[{value:"PENDING",label:"Pending"},{value:"CONFIRMED",label:"Confirmed"},{value:"PROCESSING",label:"Processing"},{value:"SHIPPED",label:"Shipped"},{value:"DELIVERED",label:"Delivered"},{value:"CANCELLED",label:"Cancelled"},{value:"REFUNDED",label:"Refunded"}];function m(e){let{order:t}=e,r=(0,a.useRouter)(),[m,p]=(0,s.useState)(!1),[h,x]=(0,s.useState)({status:t.status,trackingNumber:t.trackingNumber||""}),b=async e=>{e.preventDefault(),p(!0);try{let e=await fetch("/api/admin/orders/".concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(e.ok)(0,c.Am)({title:"Order updated",description:"Order status has been updated successfully."}),r.refresh();else{let t=await e.json();throw Error(t.error||"Failed to update order")}}catch(e){(0,c.Am)({title:"Error",description:e instanceof Error?e.message:"Failed to update order",variant:"destructive"})}finally{p(!1)}},g=(e,t)=>{x(r=>({...r,[e]:t}))};return(0,n.jsxs)(u.Zb,{children:[(0,n.jsx)(u.Ol,{children:(0,n.jsx)(u.ll,{children:"Update Order"})}),(0,n.jsx)(u.aY,{children:(0,n.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(o.Label,{htmlFor:"status",children:"Order Status"}),(0,n.jsxs)(d.Ph,{value:h.status,onValueChange:e=>g("status",e),children:[(0,n.jsx)(d.i4,{children:(0,n.jsx)(d.ki,{placeholder:"Select status"})}),(0,n.jsx)(d.Bw,{children:f.map(e=>(0,n.jsx)(d.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(o.Label,{htmlFor:"trackingNumber",children:"Tracking Number"}),(0,n.jsx)(l.I,{id:"trackingNumber",placeholder:"Enter tracking number",value:h.trackingNumber,onChange:e=>g("trackingNumber",e.target.value)})]}),(0,n.jsx)(i.z,{type:"submit",className:"w-full",disabled:m,children:m?"Updating...":"Update Order"})]})})]})}var p=r(35974),h=r(32660),x=r(40257);async function b(e){let t=await fetch("".concat(x.env.NEXT_PUBLIC_BASE_URL||"","/api/admin/orders/").concat(e),{cache:"no-store"});return t.ok?t.json():null}async function g(e){var t,r;let{params:s}=e,i=(0,a.useRouter)(),l=await b(s);return l?(0,n.jsxs)("div",{className:"w-full h-full flex flex-col p-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,n.jsxs)("button",{onClick:()=>{window.history.length>1?i.back():i.push("/admin/orders")},className:"flex items-center text-primary hover:underline",children:[(0,n.jsx)(h.Z,{className:"w-4 h-4 mr-1"}),"Back"]}),(0,n.jsx)("h1",{className:"text-2xl font-bold ml-2",children:"Order Details"})]}),(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{children:[(0,n.jsxs)(u.ll,{children:["Order #",l.orderNumber]}),(0,n.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Placed on ",new Date(l.createdAt).toLocaleString()]})]}),(0,n.jsxs)(u.aY,{children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("span",{className:"font-semibold",children:"Customer:"})," ",(null===(t=l.user)||void 0===t?void 0:t.name)||"-"," (",(null===(r=l.user)||void 0===r?void 0:r.email)||"-",")"]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("span",{className:"font-semibold",children:"Status:"})," ",(0,n.jsx)(p.C,{children:l.status})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("span",{className:"font-semibold",children:"Total:"})," R",Number(l.totalAmount).toFixed(2)]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("span",{className:"font-semibold",children:"Tracking Number:"})," ",l.trackingNumber||"-"]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("span",{className:"font-semibold",children:"Order Items:"}),(0,n.jsx)("ul",{className:"list-disc ml-6",children:l.items.map(e=>{var t;return(0,n.jsxs)("li",{children:[(null===(t=e.product)||void 0===t?void 0:t.name)||"Unknown Product"," x ",e.quantity," (R",Number(e.price).toFixed(2),")"]},e.id)})})]}),(0,n.jsx)(m,{order:{id:l.id,status:l.status,trackingNumber:l.trackingNumber}})]})]})]}):(0,a.notFound)()}},35974:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var n=r(57437);r(2265);var a=r(77712),s=r(94508);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)(i({variant:r}),t),...a})}},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return d}});var n=r(57437),a=r(2265),s=r(37053),i=r(77712),l=r(94508);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:d=!1,...u}=e,c=d?s.g7:"button";return(0,n.jsx)(c,{className:(0,l.cn)(o({variant:a,size:i,className:r})),ref:t,...u})});d.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return u},ll:function(){return o}});var n=r(57437),a=r(2265),s=r(94508);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});u.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},95186:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var n=r(57437),a=r(2265),s=r(94508);let i=a.forwardRef((e,t)=>{let{className:r,type:a,...i}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},26815:function(e,t,r){"use strict";r.d(t,{Label:function(){return d}});var n=r(57437),a=r(2265),s=r(6394),i=r(77712),l=r(94508);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.f,{ref:t,className:(0,l.cn)(o(),r),...a})});d.displayName=s.f.displayName},53647:function(e,t,r){"use strict";r.d(t,{Bw:function(){return h},Ph:function(){return u},Ql:function(){return x},i4:function(){return f},ki:function(){return c}});var n=r(57437),a=r(2265),s=r(56873),i=r(40875),l=r(22135),o=r(30401),d=r(94508);let u=s.fC;s.ZA;let c=s.B4,f=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e;return(0,n.jsxs)(s.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[a,(0,n.jsx)(s.JO,{asChild:!0,children:(0,n.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=s.xz.displayName;let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})})});m.displayName=s.u_.displayName;let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})});p.displayName=s.$G.displayName;let h=a.forwardRef((e,t)=>{let{className:r,children:a,position:i="popper",...l}=e;return(0,n.jsx)(s.h_,{children:(0,n.jsxs)(s.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...l,children:[(0,n.jsx)(m,{}),(0,n.jsx)(s.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,n.jsx)(p,{})]})})});h.displayName=s.VY.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})}).displayName=s.__.displayName;let x=a.forwardRef((e,t)=>{let{className:r,children:a,...i}=e;return(0,n.jsxs)(s.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(s.wU,{children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(s.eT,{children:a})]})});x.displayName=s.ck.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=s.Z0.displayName},35153:function(e,t,r){"use strict";r.d(t,{Am:function(){return c},pm:function(){return f}});var n=r(2265);let a=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function u(e){d=l(d,e),o.forEach(e=>{e(d)})}function c(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>u({type:"DISMISS_TOAST",toastId:r});return u({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||n()}}}),{id:r,dismiss:n,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=n.useState(d);return n.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},32507:function(e,t,r){"use strict";r.d(t,{_:function(){return i}});var n,a=r(93340),s=r(40257);let i=null!==(n=globalThis.prisma)&&void 0!==n?n:new a.PrismaClient({log:["error"],datasources:{db:{url:s.env.DATABASE_URL}}});s.on("beforeExit",async()=>{await i.$disconnect()})},94508:function(e,t,r){"use strict";r.d(t,{Bp:function(){return i},cn:function(){return s}});var n=r(61994),a=r(53335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}function i(e,t){if(e===t)return 0;if(!e.length)return t.length;if(!t.length)return e.length;let r=Array.from({length:e.length+1},()=>Array(t.length+1).fill(0));for(let t=0;t<=e.length;t++)r[t][0]=t;for(let e=0;e<=t.length;e++)r[0][e]=e;for(let n=1;n<=e.length;n++)for(let a=1;a<=t.length;a++){let s=e[n-1]===t[a-1]?0:1;r[n][a]=Math.min(r[n-1][a]+1,r[n][a-1]+1,r[n-1][a-1]+s)}return r[e.length][t.length]}r(32507)},32660:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},30401:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},40875:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(79205).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},99376:function(e,t,r){"use strict";var n=r(35475);r.o(n,"notFound")&&r.d(t,{notFound:function(){return n.notFound}}),r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},62484:function(e,t,r){"use strict";function n(e,[t,r]){return Math.min(r,Math.max(t,e))}r.d(t,{u:function(){return n}})},67822:function(e,t,r){"use strict";r.d(t,{B:function(){return o}});var n=r(2265),a=r(73966),s=r(98575),i=r(37053),l=r(57437);function o(e){let t=e+"CollectionProvider",[r,o]=(0,a.b)(t),[d,u]=r(t,{collectionRef:{current:null},itemMap:new Map}),c=e=>{let{scope:t,children:r}=e,a=n.useRef(null),s=n.useRef(new Map).current;return(0,l.jsx)(d,{scope:t,itemMap:s,collectionRef:a,children:r})};c.displayName=t;let f=e+"CollectionSlot",m=n.forwardRef((e,t)=>{let{scope:r,children:n}=e,a=u(f,r),o=(0,s.e)(t,a.collectionRef);return(0,l.jsx)(i.g7,{ref:o,children:n})});m.displayName=f;let p=e+"CollectionItemSlot",h="data-radix-collection-item",x=n.forwardRef((e,t)=>{let{scope:r,children:a,...o}=e,d=n.useRef(null),c=(0,s.e)(t,d),f=u(p,r);return n.useEffect(()=>(f.itemMap.set(d,{ref:d,...o}),()=>void f.itemMap.delete(d))),(0,l.jsx)(i.g7,{[h]:"",ref:c,children:a})});return x.displayName=p,[{Provider:c,Slot:m,ItemSlot:x},function(t){let r=u(e+"CollectionConsumer",t);return n.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll("[".concat(h,"]")));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},o]}},29114:function(e,t,r){"use strict";r.d(t,{gm:function(){return s}});var n=r(2265);r(57437);var a=n.createContext(void 0);function s(e){let t=n.useContext(a);return e||t||"ltr"}},6394:function(e,t,r){"use strict";r.d(t,{f:function(){return l}});var n=r(2265),a=r(66840),s=r(57437),i=n.forwardRef((e,t)=>(0,s.jsx)(a.WV.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=i},6718:function(e,t,r){"use strict";r.d(t,{D:function(){return a}});var n=r(2265);function a(e){let t=n.useRef({value:e,previous:e});return n.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}}},function(e){e.O(0,[2981,8183,9049,2599,2541,2971,2117,1744],function(){return e(e.s=40589)}),_N_E=e.O()}]);