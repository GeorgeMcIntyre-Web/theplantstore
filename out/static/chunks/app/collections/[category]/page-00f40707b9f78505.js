(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5307],{7997:function(e,a,s){Promise.resolve().then(s.bind(s,31308)),Promise.resolve().then(s.bind(s,11081)),Promise.resolve().then(s.bind(s,41365)),Promise.resolve().then(s.t.bind(s,72972,23))},11081:function(e,a,s){"use strict";s.d(a,{ProductFilters:function(){return g}});var t=s(57437),l=s(2265),r=s(99376),i=s(66070),n=s(62869),c=s(19060),d=s(26815),o=s(38846),u=s(94508);let m=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsxs)(o.fC,{ref:a,className:(0,u.cn)("relative flex w-full touch-none select-none items-center",s),...l,children:[(0,t.jsx)(o.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,t.jsx)(o.e6,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(o.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});m.displayName=o.fC.displayName;var h=s(32489),f=s(93022);let x=[{value:"EASY",label:"Easy"},{value:"MODERATE",label:"Moderate"},{value:"ADVANCED",label:"Advanced"}],p=[{value:"LOW",label:"Low Light"},{value:"MEDIUM",label:"Medium Light"},{value:"BRIGHT",label:"Bright Light"},{value:"DIRECT_SUN",label:"Direct Sun"}],j=[{value:"SMALL",label:"Small"},{value:"MEDIUM",label:"Medium"},{value:"LARGE",label:"Large"}];function g(e){let{category:a}=e,s=(0,r.useRouter)(),o=(0,r.useSearchParams)(),[u,g]=(0,l.useState)(0),[v,N]=(0,l.useState)(1e3),[b,y]=(0,l.useState)([parseInt(o.get("minPrice")||"0"),parseInt(o.get("maxPrice")||"1000")]),[w,P]=(0,l.useState)(!1);(0,l.useEffect)(()=>{g(0),N(1e3),y([0,1e3]),P(!0),async function(){try{let e="/api/products/price-range";a&&(e+="?category=".concat(encodeURIComponent(a)));let s=await fetch(e),t=await s.json();!s.ok||(g(Math.floor(t.minPrice)),N(Math.ceil(t.maxPrice)),o.get("minPrice")||o.get("maxPrice")||y([Math.floor(t.minPrice),Math.ceil(t.maxPrice)]))}finally{P(!1)}}()},[a]);let S=e=>{let a=o.get(e);return a?a.split(","):[]},k=(e,a)=>{let t=new URLSearchParams(o.toString());a.length>0?t.set(e,a.join(",")):t.delete(e),t.delete("page"),s.push("?".concat(t.toString()))},C=Array.from(o.keys()).some(e=>!["category","page","sortBy","sortOrder"].includes(e)),L=(e,a,s)=>{let t=S(e);s?k(e,[...t,a]):k(e,t.filter(e=>e!==a))},R=e=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(e);return(0,t.jsxs)("div",{className:"space-y-6",children:[C&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Filters"}),(0,t.jsxs)(n.z,{variant:"ghost",size:"sm",onClick:()=>{let e=new URLSearchParams;a&&e.set("category",a),s.push("?".concat(e.toString()))},className:"text-sm",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4 mr-1"}),"Clear All"]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-base",children:"Price Range"})}),(0,t.jsxs)(i.aY,{className:"space-y-4",children:[w?(0,t.jsx)(f.O,{className:"h-8 w-full mb-2"}):(0,t.jsx)(m,{value:b,onValueChange:y,onValueCommit:e=>{y(e);let a=new URLSearchParams(o.toString());e[0]>u?a.set("minPrice",e[0].toString()):a.delete("minPrice"),e[1]<v?a.set("maxPrice",e[1].toString()):a.delete("maxPrice"),a.delete("page"),s.push("?".concat(a.toString()))},min:u,max:v,step:10,className:"w-full",disabled:w}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:w?"opacity-50":"",children:R(b[0])}),(0,t.jsx)("span",{className:w?"opacity-50":"",children:R(b[1])})]})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-base",children:"Care Level"})}),(0,t.jsx)(i.aY,{className:"space-y-3",children:x.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.X,{id:"care-".concat(e.value),checked:S("careLevel").includes(e.value),onCheckedChange:a=>L("careLevel",e.value,a)}),(0,t.jsx)(d.Label,{htmlFor:"care-".concat(e.value),className:"text-sm font-normal cursor-pointer",children:e.label})]},e.value))})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-base",children:"Light Requirements"})}),(0,t.jsx)(i.aY,{className:"space-y-3",children:p.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.X,{id:"light-".concat(e.value),checked:S("lightRequirement").includes(e.value),onCheckedChange:a=>L("lightRequirement",e.value,a)}),(0,t.jsx)(d.Label,{htmlFor:"light-".concat(e.value),className:"text-sm font-normal cursor-pointer",children:e.label})]},e.value))})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-base",children:"Plant Size"})}),(0,t.jsx)(i.aY,{className:"space-y-3",children:j.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.X,{id:"size-".concat(e.value),checked:S("plantSize").includes(e.value),onCheckedChange:a=>L("plantSize",e.value,a)}),(0,t.jsx)(d.Label,{htmlFor:"size-".concat(e.value),className:"text-sm font-normal cursor-pointer",children:e.label})]},e.value))})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-base",children:"Special Features"})}),(0,t.jsx)(i.aY,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.X,{id:"pet-safe",checked:S("isPetSafe").includes("true"),onCheckedChange:e=>L("isPetSafe","true",e)}),(0,t.jsx)(d.Label,{htmlFor:"pet-safe",className:"text-sm font-normal cursor-pointer",children:"Pet Safe"})]})})]})]})}},41365:function(e,a,s){"use strict";s.d(a,{ProductGrid:function(){return x}});var t=s(57437),l=s(2265),r=s(33145),i=s(27648),n=s(66070),c=s(62869),d=s(35974),o=s(53647),u=s(51817),m=s(16275),h=s(88997),f=s(53878);function x(e){let{category:a,searchParams:s}=e,[x,p]=(0,l.useState)([]),[j,g]=(0,l.useState)(!0),[v,N]=(0,l.useState)({page:1,limit:12,total:0,totalPages:0}),[b,y]=(0,l.useState)((null==s?void 0:s.sortBy)||"name"),[w,P]=(0,l.useState)((null==s?void 0:s.sortOrder)||"asc"),{addItem:S}=(0,f.j)(),k=e=>new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(e),C=async()=>{g(!0);try{let e=new URLSearchParams;a&&e.append("category",a),(null==s?void 0:s.page)&&e.append("page",s.page),(null==s?void 0:s.careLevel)&&e.append("careLevel",s.careLevel),(null==s?void 0:s.lightRequirement)&&e.append("lightRequirement",s.lightRequirement),(null==s?void 0:s.isPetSafe)&&e.append("isPetSafe",s.isPetSafe),(null==s?void 0:s.plantSize)&&e.append("plantSize",s.plantSize),(null==s?void 0:s.minPrice)&&e.append("minPrice",s.minPrice),(null==s?void 0:s.maxPrice)&&e.append("maxPrice",s.maxPrice),e.append("sortBy",b),e.append("sortOrder",w);let t=await fetch("/api/products?".concat(e.toString()));if(t.ok){let e=await t.json();p(e.products||[]),N(e.pagination||v)}}catch(e){console.error("Failed to fetch products:",e)}finally{g(!1)}};return((0,l.useEffect)(()=>{C()},[a,s,b,w]),j)?(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(u.Z,{className:"h-8 w-8 animate-spin"})})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",x.length," of ",v.total," products"]}),(0,t.jsxs)(o.Ph,{value:"".concat(b,"-").concat(w),onValueChange:e=>{let[a,s]=e.split("-");y(a),P(s)},children:[(0,t.jsx)(o.i4,{className:"w-48",children:(0,t.jsx)(o.ki,{placeholder:"Sort by"})}),(0,t.jsxs)(o.Bw,{children:[(0,t.jsx)(o.Ql,{value:"name-asc",children:"Name: A to Z"}),(0,t.jsx)(o.Ql,{value:"name-desc",children:"Name: Z to A"}),(0,t.jsx)(o.Ql,{value:"price-asc",children:"Price: Low to High"}),(0,t.jsx)(o.Ql,{value:"price-desc",children:"Price: High to Low"}),(0,t.jsx)(o.Ql,{value:"created-desc",children:"Newest First"}),(0,t.jsx)(o.Ql,{value:"created-asc",children:"Oldest First"})]})]})]}),0===x.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"rounded-full bg-muted p-6 mx-auto w-fit mb-4",children:(0,t.jsx)(m.Z,{className:"h-12 w-12 text-muted-foreground"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No products found"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Try adjusting your filters or search criteria"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(e=>{let a=e.images.find(e=>e.isPrimary)||e.images[0],s=e.compareAtPrice?Math.round((e.compareAtPrice-e.price)/e.compareAtPrice*100):0;return(0,t.jsx)(n.Zb,{className:"group cursor-pointer card-hover",children:(0,t.jsxs)(n.aY,{className:"p-0",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i.default,{href:"/products/".concat(e.slug),children:(0,t.jsx)("div",{className:"relative aspect-square overflow-hidden rounded-t-lg",children:a?(0,t.jsx)(r.default,{src:a.url,alt:a.altText||e.name,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-105"}):(0,t.jsx)("div",{className:"h-full w-full bg-muted flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-muted-foreground",children:"No image"})})})}),(0,t.jsxs)("div",{className:"absolute top-3 left-3 flex flex-col gap-2",children:[s>0&&(0,t.jsxs)(d.C,{variant:"destructive",className:"text-xs",children:["-",s,"%"]}),e.stockQuantity<=e.lowStockThreshold&&(0,t.jsx)(d.C,{variant:"secondary",className:"text-xs",children:"Low Stock"})]}),(0,t.jsx)("div",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsx)(c.z,{size:"sm",variant:"secondary",className:"h-8 w-8 p-0",children:(0,t.jsx)(h.Z,{className:"h-4 w-4"})})})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)(i.default,{href:"/products/".concat(e.slug),children:(0,t.jsx)("h3",{className:"font-semibold mb-2 hover:text-primary transition-colors line-clamp-2",children:e.name})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[e.careLevel&&(0,t.jsx)(d.C,{variant:"outline",className:"text-xs",children:e.careLevel.toLowerCase()}),e.isPetSafe&&(0,t.jsx)(d.C,{variant:"outline",className:"text-xs text-green-600",children:"Pet Safe"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-lg font-bold currency",children:k(e.price)}),e.compareAtPrice&&(0,t.jsx)("span",{className:"ml-2 text-sm text-muted-foreground line-through",children:k(e.compareAtPrice)})]}),!1]}),(0,t.jsxs)(c.z,{className:"w-full",onClick:()=>S(e.id,1,e),disabled:0===e.stockQuantity,children:[(0,t.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),0===e.stockQuantity?"Out of Stock":"Add to Cart"]})]})]})},e.id)})}),v.totalPages>1&&(0,t.jsx)("div",{className:"flex items-center justify-center space-x-2 mt-8",children:Array.from({length:v.totalPages},(e,a)=>a+1).map(e=>(0,t.jsx)(c.z,{variant:e===v.page?"default":"outline",size:"sm",asChild:!0,children:(0,t.jsx)(i.default,{href:"?".concat(new URLSearchParams({...s,page:e.toString()}).toString()),children:e})},e))})]})}},19060:function(e,a,s){"use strict";s.d(a,{X:function(){return c}});var t=s(57437),l=s(2265),r=s(9270),i=s(30401),n=s(94508);let c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.fC,{ref:a,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...l,children:(0,t.jsx)(r.z$,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(i.Z,{className:"h-4 w-4"})})})});c.displayName=r.fC.displayName},26815:function(e,a,s){"use strict";s.d(a,{Label:function(){return d}});var t=s(57437),l=s(2265),r=s(6394),i=s(77712),n=s(94508);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.f,{ref:a,className:(0,n.cn)(c(),s),...l})});d.displayName=r.f.displayName},53647:function(e,a,s){"use strict";s.d(a,{Bw:function(){return x},Ph:function(){return o},Ql:function(){return p},i4:function(){return m},ki:function(){return u}});var t=s(57437),l=s(2265),r=s(56873),i=s(40875),n=s(22135),c=s(30401),d=s(94508);let o=r.fC;r.ZA;let u=r.B4,m=l.forwardRef((e,a)=>{let{className:s,children:l,...n}=e;return(0,t.jsxs)(r.xz,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[l,(0,t.jsx)(r.JO,{asChild:!0,children:(0,t.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.xz.displayName;let h=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.u_,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...l,children:(0,t.jsx)(n.Z,{className:"h-4 w-4"})})});h.displayName=r.u_.displayName;let f=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.$G,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...l,children:(0,t.jsx)(i.Z,{className:"h-4 w-4"})})});f.displayName=r.$G.displayName;let x=l.forwardRef((e,a)=>{let{className:s,children:l,position:i="popper",...n}=e;return(0,t.jsx)(r.h_,{children:(0,t.jsxs)(r.VY,{ref:a,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...n,children:[(0,t.jsx)(h,{}),(0,t.jsx)(r.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,t.jsx)(f,{})]})})});x.displayName=r.VY.displayName,l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.__,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...l})}).displayName=r.__.displayName;let p=l.forwardRef((e,a)=>{let{className:s,children:l,...i}=e;return(0,t.jsxs)(r.ck,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.wU,{children:(0,t.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(r.eT,{children:l})]})});p.displayName=r.ck.displayName,l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...l})}).displayName=r.Z0.displayName},93022:function(e,a,s){"use strict";s.d(a,{O:function(){return r}});var t=s(57437),l=s(94508);function r(e){let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-muted",a),...s})}}},function(e){e.O(0,[2981,8183,9049,605,2599,2972,4116,6028,2541,7527,4453,1308,2971,2117,1744],function(){return e(e.s=7997)}),_N_E=e.O()}]);