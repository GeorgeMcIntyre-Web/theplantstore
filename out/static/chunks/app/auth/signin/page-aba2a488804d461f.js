(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8098],{20269:function(e,s,l){Promise.resolve().then(l.bind(l,20350))},20350:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return N}});var t=l(57437),a=l(2265),r=l(80605),i=l(99376),n=l(27648),c=l(62869),d=l(95186),o=l(26815),u=l(66070),x=l(65613),h=l(89547),m=l(89345),f=l(66337),g=l(87769),j=l(42208),p=l(35153),v=l(40257);function N(){let[e,s]=(0,a.useState)(""),[l,N]=(0,a.useState)(""),[b,w]=(0,a.useState)(!1),[y,C]=(0,a.useState)(!1),[E,S]=(0,a.useState)(""),_=(0,i.useRouter)(),[z,B]=(0,a.useState)(null);(0,a.useEffect)(()=>{(0,r.getProviders)().then(e=>B(e))},[]);let F=async s=>{s.preventDefault(),S(""),C(!0);try{let s=await (0,r.signIn)("credentials",{email:e,password:l,redirect:!1});if(null==s?void 0:s.error)S("Invalid email or password");else{var t;(0,p.Am)({title:"Welcome back!",description:"You have been signed in successfully."});let e=await (0,r.getSession)(),s=null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.role;s&&"CUSTOMER"!==s?_.push("/admin"):_.push("/")}}catch(e){S("An error occurred. Please try again.")}finally{C(!1)}},A=e=>"google"===e?!!v.env.NEXT_PUBLIC_GOOGLE_ENABLED:"azure-ad"!==e||!!v.env.NEXT_PUBLIC_AZURE_AD_ENABLED;return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 px-4",children:(0,t.jsxs)(u.Zb,{className:"w-full max-w-md",children:[(0,t.jsxs)(u.Ol,{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,t.jsx)(h.Z,{className:"h-8 w-8 text-primary mr-2"}),(0,t.jsx)("span",{className:"text-2xl font-bold",children:"The House Plant Store"})]}),(0,t.jsx)(u.ll,{children:"Sign In"}),(0,t.jsx)(u.SZ,{children:"Welcome back! Sign in to your account to continue."})]}),(0,t.jsxs)(u.aY,{children:[z&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex flex-col gap-3 mb-3",children:Object.values(z).filter(e=>"credentials"!==e.id).map(e=>{let s=e.name,l=null;"google"===e.id?(s="Google",l=(0,t.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 48 48",children:(0,t.jsxs)("g",{children:[(0,t.jsx)("path",{fill:"#4285F4",d:"M44.5 20H24v8.5h11.7C34.7 33.1 29.9 36 24 36c-6.6 0-12-5.4-12-12s5.4-12 12-12c2.7 0 5.2.9 7.2 2.4l6.4-6.4C33.5 5.1 28.1 3 24 3 12.4 3 3 12.4 3 24s9.4 21 21 21c10.5 0 20-7.5 20-21 0-1.3-.1-2.7-.5-4z"}),(0,t.jsx)("path",{fill:"#34A853",d:"M6.3 14.7l7 5.1C15.1 17.1 19.2 15 24 15c2.7 0 5.2.9 7.2 2.4l6.4-6.4C33.5 5.1 28.1 3 24 3 15.6 3 8.1 8.1 6.3 14.7z"}),(0,t.jsx)("path",{fill:"#FBBC05",d:"M24 45c5.9 0 11.3-2.1 15.5-5.7l-7.2-5.9C29.7 35.1 27 36 24 36c-5.9 0-10.8-3.8-12.6-9.1l-7 5.4C8.1 39.9 15.6 45 24 45z"}),(0,t.jsx)("path",{fill:"#EA4335",d:"M44.5 20H24v8.5h11.7c-1.2 3.2-4.7 7.5-11.7 7.5-6.6 0-12-5.4-12-12s5.4-12 12-12c2.7 0 5.2.9 7.2 2.4l6.4-6.4C33.5 5.1 28.1 3 24 3c-6.6 0-12 5.4-12 12s5.4 12 12 12c2.7 0 5.2-.9 7.2-2.4l6.4 6.4C33.5 42.9 28.1 45 24 45z"})]})})):"azure-ad"===e.id&&(s="Microsoft",l=(0,t.jsxs)("svg",{className:"h-5 w-5",viewBox:"0 0 32 32",children:[(0,t.jsx)("rect",{fill:"#F25022",x:"2",y:"2",width:"13",height:"13"}),(0,t.jsx)("rect",{fill:"#7FBA00",x:"17",y:"2",width:"13",height:"13"}),(0,t.jsx)("rect",{fill:"#00A4EF",x:"2",y:"17",width:"13",height:"13"}),(0,t.jsx)("rect",{fill:"#FFB900",x:"17",y:"17",width:"13",height:"13"})]}));let a=A(e.id);return(0,t.jsxs)(c.z,{variant:"outline",className:"w-full flex items-center justify-center gap-2 font-medium border-2 border-muted hover:border-primary transition",onClick:()=>{a?(0,r.signIn)(e.id):alert("This login method will be available once configured.")},disabled:!1,children:[l,"Sign in with ",s]},e.id)})}),(!A("google")||!A("azure-ad"))&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground mb-3 text-center",children:"Google and Microsoft login will be available once configured."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 my-4",children:[(0,t.jsx)("div",{className:"flex-1 h-px bg-muted-foreground/20"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground uppercase",children:"or"}),(0,t.jsx)("div",{className:"flex-1 h-px bg-muted-foreground/20"})]}),E&&(0,t.jsx)(x.bZ,{variant:"destructive",children:(0,t.jsx)(x.X,{children:E})}),(0,t.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"email",children:"Email"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(d.I,{id:"email",type:"email",placeholder:"Enter your email",value:e,onChange:e=>s(e.target.value),className:"pl-10",required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"password",children:"Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(f.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(d.I,{id:"password",type:b?"text":"password",placeholder:"Enter your password",value:l,onChange:e=>N(e.target.value),className:"pl-10 pr-10",required:!0}),(0,t.jsx)(c.z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>w(!b),children:b?(0,t.jsx)(g.Z,{className:"h-4 w-4 text-muted-foreground"}):(0,t.jsx)(j.Z,{className:"h-4 w-4 text-muted-foreground"})})]})]}),(0,t.jsx)(c.z,{type:"submit",className:"w-full",disabled:y,children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"spinner mr-2"}),"Signing In..."]}):"Sign In"})]}),(0,t.jsx)("div",{className:"mt-6 text-center text-sm",children:(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Don't have an account?"," ",(0,t.jsx)(n.default,{href:"/auth/signup",className:"text-primary hover:underline",children:"Sign up"})]})}),(0,t.jsx)("div",{className:"mt-4 text-center",children:(0,t.jsx)(n.default,{href:"/",className:"text-sm text-muted-foreground hover:text-primary",children:"‚Üê Back to Home"})})]})]})})}}},function(e){e.O(0,[2981,605,2972,9721,2971,2117,1744],function(){return e(e.s=20269)}),_N_E=e.O()}]);